"use strict";exports.__esModule=!0,exports.default=void 0;var _styledBase=_interopRequireDefault(require("@emotion/styled-base")),_react=_interopRequireWildcard(require("react")),_util=require("../util"),PropTypes=_interopRequireWildcard(require("prop-types")),_constants=require("../constants");function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var a=new WeakMap;return _getRequireWildcardCache=function(){return a},a}function _interopRequireWildcard(a){if(a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var b=_getRequireWildcardCache();if(b&&b.has(a))return b.get(a);var c={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var e in a)if(Object.prototype.hasOwnProperty.call(a,e)){var f=d?Object.getOwnPropertyDescriptor(a,e):null;f&&(f.get||f.set)?Object.defineProperty(c,e,f):c[e]=a[e]}return c.default=a,b&&b.set(a,c),c}function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _assertThisInitialized(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _inheritsLoose(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var handlePlaceHolder=function(a,b){var c=a.addPlaceholder,d=a.searchable,e=a.placeholder,f=b.values&&0===b.values.length,g=b.values&&0<b.values.length;return g&&c&&d?c:f?e:g&&!d?"":""},Input=/*#__PURE__*/function(a){function b(){for(var b,c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=a.call.apply(a,[this].concat(d))||this,_defineProperty(_assertThisInitialized(b),"input",_react.default.createRef()),_defineProperty(_assertThisInitialized(b),"onBlur",function(a){return a.stopPropagation(),b.props.state.dropdown?b.input.current.focus():b.input.current.blur()}),_defineProperty(_assertThisInitialized(b),"handleKeyPress",function(a){var c=b.props,d=c.props,e=c.state,f=c.methods;return d.create&&"Enter"===a.key&&!(0,_util.valueExistInSelected)(e.search,e.values,b.props)&&e.search&&null===e.cursor&&f.createNew(e.search)}),b}_inheritsLoose(b,a);var c=b.prototype;return c.componentDidUpdate=function componentDidUpdate(a){(this.props.state.dropdown||a.state.dropdown!==this.props.state.dropdown&&this.props.state.dropdown||this.props.props.autoFocus)&&this.input.current.focus(),a.state.dropdown===this.props.state.dropdown||this.props.state.dropdown||this.input.current.blur()},c.render=function render(){var a=this.props,b=a.props,c=a.state,d=a.methods;return b.inputRenderer?b.inputRenderer({props:b,state:c,methods:d,inputRef:this.input}):_react.default.createElement(InputComponent,{ref:this.input,tabIndex:"-1",onFocus:function onFocus(a){return a.stopPropagation()},className:_constants.LIB_NAME+"-input",size:d.getInputSize(),value:c.search,readOnly:!b.searchable,onClick:function onClick(){return d.dropDown("open")},onKeyPress:this.handleKeyPress,onChange:d.setSearch,onBlur:this.onBlur,placeholder:handlePlaceHolder(b,c),disabled:b.disabled})},b}(_react.Component),InputComponent=(0,_styledBase.default)("input",{target:"e11wid6y0",label:"InputComponent"})("line-height:inherit;width:calc(",function(a){var b=a.size;return b+"ch"}," + 5px);border:none;margin-left:5px;background:transparent;font-size:smaller;",function(a){var b=a.readOnly;return b&&"cursor: pointer;"},":focus{outline:none;}"+("production"===process.env.NODE_ENV?"":"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb21wb25lbnRzL0lucHV0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWlHbUMiLCJmaWxlIjoiLi4vLi4vc3JjL2NvbXBvbmVudHMvSW5wdXQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgc3R5bGVkIGZyb20gJ0BlbW90aW9uL3N0eWxlZCc7XHJcbmltcG9ydCB7IHZhbHVlRXhpc3RJblNlbGVjdGVkIH0gZnJvbSAnLi4vdXRpbCc7XHJcbmltcG9ydCAqIGFzIFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcclxuaW1wb3J0IHsgTElCX05BTUUgfSBmcm9tICcuLi9jb25zdGFudHMnO1xyXG5cclxuY29uc3QgaGFuZGxlUGxhY2VIb2xkZXIgPSAocHJvcHMsIHN0YXRlKSA9PiB7XHJcbiAgY29uc3QgeyBhZGRQbGFjZWhvbGRlciwgc2VhcmNoYWJsZSwgcGxhY2Vob2xkZXIgfSA9IHByb3BzO1xyXG4gIGNvbnN0IG5vVmFsdWVzID0gc3RhdGUudmFsdWVzICYmIHN0YXRlLnZhbHVlcy5sZW5ndGggPT09IDA7XHJcbiAgY29uc3QgaGFzVmFsdWVzID0gc3RhdGUudmFsdWVzICYmIHN0YXRlLnZhbHVlcy5sZW5ndGggPiAwO1xyXG5cclxuICBpZiAoaGFzVmFsdWVzICYmIGFkZFBsYWNlaG9sZGVyICYmIHNlYXJjaGFibGUpIHtcclxuICAgIHJldHVybiBhZGRQbGFjZWhvbGRlcjtcclxuICB9XHJcblxyXG4gIGlmIChub1ZhbHVlcykge1xyXG4gICAgcmV0dXJuIHBsYWNlaG9sZGVyO1xyXG4gIH1cclxuXHJcbiAgaWYgKGhhc1ZhbHVlcyAmJiAhc2VhcmNoYWJsZSkge1xyXG4gICAgcmV0dXJuICcnO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuICcnO1xyXG59O1xyXG5cclxuY2xhc3MgSW5wdXQgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gIGlucHV0ID0gUmVhY3QuY3JlYXRlUmVmKCk7XHJcblxyXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpIHtcclxuICAgIGlmIChcclxuICAgICAgdGhpcy5wcm9wcy5zdGF0ZS5kcm9wZG93biB8fCAocHJldlByb3BzLnN0YXRlLmRyb3Bkb3duICE9PSB0aGlzLnByb3BzLnN0YXRlLmRyb3Bkb3duICYmIHRoaXMucHJvcHMuc3RhdGUuZHJvcGRvd24pIHx8XHJcbiAgICAgIHRoaXMucHJvcHMucHJvcHMuYXV0b0ZvY3VzXHJcbiAgICApIHtcclxuICAgICAgdGhpcy5pbnB1dC5jdXJyZW50LmZvY3VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHByZXZQcm9wcy5zdGF0ZS5kcm9wZG93biAhPT0gdGhpcy5wcm9wcy5zdGF0ZS5kcm9wZG93biAmJiAhdGhpcy5wcm9wcy5zdGF0ZS5kcm9wZG93bikge1xyXG4gICAgICAgdGhpcy5pbnB1dC5jdXJyZW50LmJsdXIoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uQmx1ciA9IChldmVudCkgPT4ge1xyXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICBpZiAoIXRoaXMucHJvcHMuc3RhdGUuZHJvcGRvd24pIHtcclxuICAgICAgcmV0dXJuIHRoaXMuaW5wdXQuY3VycmVudC5ibHVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuaW5wdXQuY3VycmVudC5mb2N1cygpO1xyXG4gIH07XHJcblxyXG4gIGhhbmRsZUtleVByZXNzID0gKGV2ZW50KSA9PiB7XHJcbiAgICBjb25zdCB7IHByb3BzLCBzdGF0ZSwgbWV0aG9kcyB9ID0gdGhpcy5wcm9wcztcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICBwcm9wcy5jcmVhdGUgJiZcclxuICAgICAgZXZlbnQua2V5ID09PSAnRW50ZXInICYmXHJcbiAgICAgICF2YWx1ZUV4aXN0SW5TZWxlY3RlZChzdGF0ZS5zZWFyY2gsIHN0YXRlLnZhbHVlcywgdGhpcy5wcm9wcykgJiZcclxuICAgICAgc3RhdGUuc2VhcmNoICYmXHJcbiAgICAgIHN0YXRlLmN1cnNvciA9PT0gbnVsbCAmJlxyXG4gICAgICBtZXRob2RzLmNyZWF0ZU5ldyhzdGF0ZS5zZWFyY2gpXHJcbiAgICApO1xyXG4gIH07XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHsgcHJvcHMsIHN0YXRlLCBtZXRob2RzIH0gPSB0aGlzLnByb3BzO1xyXG5cclxuICAgIGlmIChwcm9wcy5pbnB1dFJlbmRlcmVyKSB7XHJcbiAgICAgIHJldHVybiBwcm9wcy5pbnB1dFJlbmRlcmVyKHsgcHJvcHMsIHN0YXRlLCBtZXRob2RzLCBpbnB1dFJlZjogdGhpcy5pbnB1dCB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8SW5wdXRDb21wb25lbnRcclxuICAgICAgICByZWY9e3RoaXMuaW5wdXR9XHJcbiAgICAgICAgdGFiSW5kZXg9XCItMVwiXHJcbiAgICAgICAgb25Gb2N1cz17KGV2ZW50KSA9PiBldmVudC5zdG9wUHJvcGFnYXRpb24oKX1cclxuICAgICAgICBjbGFzc05hbWU9e2Ake0xJQl9OQU1FfS1pbnB1dGB9XHJcbiAgICAgICAgc2l6ZT17bWV0aG9kcy5nZXRJbnB1dFNpemUoKX1cclxuICAgICAgICB2YWx1ZT17c3RhdGUuc2VhcmNofVxyXG4gICAgICAgIHJlYWRPbmx5PXshcHJvcHMuc2VhcmNoYWJsZX1cclxuICAgICAgICBvbkNsaWNrPXsoKSA9PiBtZXRob2RzLmRyb3BEb3duKCdvcGVuJyl9XHJcbiAgICAgICAgb25LZXlQcmVzcz17dGhpcy5oYW5kbGVLZXlQcmVzc31cclxuICAgICAgICBvbkNoYW5nZT17bWV0aG9kcy5zZXRTZWFyY2h9XHJcbiAgICAgICAgb25CbHVyPXt0aGlzLm9uQmx1cn1cclxuICAgICAgICBwbGFjZWhvbGRlcj17aGFuZGxlUGxhY2VIb2xkZXIocHJvcHMsIHN0YXRlKX1cclxuICAgICAgICBkaXNhYmxlZD17cHJvcHMuZGlzYWJsZWR9XHJcbiAgICAgIC8+XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuSW5wdXQucHJvcFR5cGVzID0ge1xyXG4gIHByb3BzOiBQcm9wVHlwZXMub2JqZWN0LFxyXG4gIHN0YXRlOiBQcm9wVHlwZXMub2JqZWN0LFxyXG4gIG1ldGhvZHM6IFByb3BUeXBlcy5vYmplY3RcclxufTtcclxuXHJcbmNvbnN0IElucHV0Q29tcG9uZW50ID0gc3R5bGVkLmlucHV0YFxyXG4gIGxpbmUtaGVpZ2h0OiBpbmhlcml0O1xyXG4gIHdpZHRoOiBjYWxjKCR7KHsgc2l6ZSB9KSA9PiBgJHtzaXplfWNoYH0gKyA1cHgpO1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBtYXJnaW4tbGVmdDogNXB4O1xyXG4gIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xyXG4gIGZvbnQtc2l6ZTogc21hbGxlcjtcclxuICAkeyh7IHJlYWRPbmx5IH0pID0+IHJlYWRPbmx5ICYmICdjdXJzb3I6IHBvaW50ZXI7J31cclxuICA6Zm9jdXMge1xyXG4gICAgb3V0bGluZTogbm9uZTtcclxuICB9XHJcbmA7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBJbnB1dDtcclxuIl19 */")),_default=Input;exports.default=_default;